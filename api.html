<!doctype html>
<!--[if IE 7 ]>		 <html class="no-js ie ie7 lte7 lte8 lte9" lang="en-US"> <![endif]-->
<!--[if IE 8 ]>		 <html class="no-js ie ie8 lte8 lte9" lang="en-US"> <![endif]-->
<!--[if IE 9 ]>		 <html class="no-js ie ie9 lte9>" lang="en-US"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="en-US"> <!--<![endif]-->
<head data-live-domain="api.jquery.com">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>CrawlScript</title>

<meta name="author" content="CrawlScript">
	<meta name="description" content="CrawlScript">

	<meta name="viewport" content="width=device-width">

	<link rel="shortcut icon" href="images/favicon.ico">

	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/style.css">
	
	
<meta name="generator" content="WordPress 3.7" />

</head>
<body class="api jquery home blog single-author">

<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->

<div id="container">
	<div id="logo-events" class="constrain clearfix">
		<h2 class="logo"><a></a></h2>

		<aside><div id="broadcast"></div></aside>
	</div>

	<nav id="main" class="constrain clearfix">
		<div class="menu-top-container">
	<ul id="menu-top" class="menu">
	
	<li class="menu-item"><a href="index.html">简介</a></li>
	<li class="menu-item"><a href="tutorial.html">教程</a></li>
	<li class="menu-item current"><a href="api.html">API文档</a></li>
	<li class="menu-item"><a href="download.html">下载</a></li>


	</ul>
</div>

	
	</nav>

	<div id="content-wrapper" class="clearfix row">
<div class="content-right listing twelve columns">
	<div id="content">
		<h1 class="page-title">CrawlScript API</h1>
		<hr>
        
<article id="post-2" class="post-3 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-10 category-14">
	<header class="entry-header">
		<div class="entry-meta">
		</div>
				<h1 class="entry-title">
				<a  rel="bookmark">全局函数</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>CrawlScript具有一些可全局使用的函数。</p>
        <p>1.<b>print(object)</b>:object可以是任何对象，print(object)会显示object的toString()函数返回的结果。</p>
        <p>2.<b>uid()</b>:返回一个读一无二的字符串,常用于生成独一无二的文件名.</p>
        <p>3.<b>write(filepath,string)</b>:向路径为filepath的文件的末尾,写入string字符串.如果filepath对应的文件不存在，会自动新建文件,但必须保证文件所在的文件夹存在.</p>
        <p>4.<b>load(filepath)</b>:运行文件路径为filepath的脚本文件.</p>
	</div><!-- .entry-summary -->
</article>
<article id="post-3" class="post-4 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-10 category-14">
	<header class="entry-header">
		<div class="entry-meta">
		</div>
				<h1 class="entry-title">
				<a  rel="bookmark">ECMA</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>CrawlScript是在ECMA标准的基础上设计的语言,是一种javascript,在语法上和网页开发中使用的javascript完全相同,但是并不支持网页开发中所特有的函数和对象,如document、alert()在CrawlScript中会失效.CrawlScript有自己的一套特有的函数和对象,详细请看下面的API.</p>
	</div><!-- .entry-summary -->
</article>
		
<article id="post-4" class="post-4 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-10 category-14">
	<header class="entry-header">
		<div class="entry-meta">
		</div>
				<h1 class="entry-title">
				<a  rel="bookmark">$</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>$是CrawlScript最核心的一个对象,它封装了爬虫常用一些方法,为了简化操作,$也可以当一个函数使用.</p>
	</div><!-- .entry-summary -->
</article>
		
<article id="post-5" class="post-5 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-10 category-14">
	<header class="entry-header">
		<div class="entry-meta">
		</div>
				<h1 class="entry-title">
				<a  rel="bookmark">$(url)</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>根据网页的url获取一个网页的DOM树（树根）.</p>
		<br><p><b>实例-显示网页的所有文字:</b><br/>doc=$("http://www.baidu.com");<br/>print(doc);</p>
	</div><!-- .entry-summary -->
</article>
        
<article id="post-6" class="post-6 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-10 category-14">
	<header class="entry-header">
		<div class="entry-meta">
		</div>
				<h1 class="entry-title">
				<a  rel="bookmark">$(url,agent)</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>根据网页的url和指定的客户端agent获取一个网页的DOM树（树根）.</p>
        <p>$(url)默认以windows火狐浏览器作为客户端,其实是缺省了参数的$(url,agent)函数。</p>
        <p>agent的取值可以是标准的http的agent定义,如"Mozilla/5.0 (Windows NT 5.1; rv:22.0) Gecko/20100101 Firefox/22.0",也可以是"windows"(缩写："win","w"),"mobile"(缩写:"m").</p>
            <br><p><b>实例-显示手机版网页的所有文字:</b><br/>doc=$("http://www.baidu.com","m");<br/>print(doc);</p>
	</div><!-- .entry-summary -->
</article>





<article id="post-11" class="post-11 post type-post status-publish format-standard hentry category-dom-insertion-outside category-10 category-14">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				<a rel="bookmark">DOM对象</a>
			</h1>
			</header>

		<div class="entry-summary">
        <p>CrawlScript中有4中DOM对象：文本元素（叶子节点）,非文本元素（非叶子节点）,网页（本质是非文本元素,DOM树的树根,具有一定的扩展功能）,元素集合.为了简化操作,我们在脚本中使用这四种元素不做太大区分，微小的区分在后面的API中会描述</p>
		<p>DOM对象最初都是由$(url)函数返回的,执行doc=$(url),doc为整个网页DOM树的树根（最顶层的非文本元素）,执行doc.select(selector),doc.div(),doc.a()等函数,可以根据条件获得doc的子集.详细用法请看下面的API,下文中用doc代表一个已经生成的DOM对象.</p>
	</div><!-- .entry-summary -->
</article>
        
<article id="post-13" class="post-13 post type-post status-publish format-standard hentry category-global-ajax-event-handlers category-10">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				    <a rel="bookmark">doc.type()</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>返回当前DOM元素的类型:text(文本）,element(非文本元素),document(网页),elements(element的集合).</p>
		
	</div><!-- .entry-summary -->
</article>
        
<article id="post-13" class="post-13 post type-post status-publish format-standard hentry category-global-ajax-event-handlers category-10">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				    <a rel="bookmark">doc.select(selector)</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>根据选择器selector返回doc中符合选择器条件的DOM元素集合。除了text类型的DOM元素之外，都可以使用.</p>
		<p>selector是一个字符串,对DOM元素进行条件限制,例如"div>p"表示DOM元素是div里的p元素,"a[id=link]"表示DOM元素是id=link的a元素,CrawlScript中的selector和Jsoup中的selector完全等价,详细请看<a href="http://www.open-open.com/jsoup/selector-syntax.htm">selector说明书</a>.</p>
		<br><p><b>实例-显示网页中所有超链接的链接的文本:</b><br/>doc = $("http://www.baidu.com");<br/>print(doc.select("a"));</p>
	</div><!-- .entry-summary -->
</article>
        
<article id="post-7" class="post-7 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-18">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				<a  rel="bookmark">doc.each(selector,func)</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>在一个DOM元素（非文本元素或者元素集合）doc中根据selector选择出满足条件的元素,将每个元素作为函数func的参数,执行func函数.func函数形式为function(element).除了text类型的DOM元素之外，都可以使用.</p>
		<br><p><b>实例-显示网页中所有超链接的链接:</b><br/>doc = $("http://www.baidu.com");<br>func = function( e ){<br> &nbsp;&nbsp;print(e.attr( "href" ));<br>}<br>doc.each("a" , func);</p>
	</div><!-- .entry-summary -->
</article>
        
<article id="post-7" class="post-7 post type-post status-publish format-standard hentry category-miscellaneous-traversal category-18">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				<a  rel="bookmark">doc.traverse(func)</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>在一个DOM元素（非文本元素）doc中按照后序遍历的顺序,分别以每个节点作为函数func的参数,执行func函数.func函数形式为function(node,type),type表示node的类型,type=0表示node是文本节点，type=1表示node是非文本节点.此方法使用于非文本元素（包括网页）,即使用于element和document元素.</p>
	</div><!-- .entry-summary -->
</article>

<article id="post-15" class="post-15 post type-post status-publish format-standard hentry category-global-ajax-event-handlers category-10">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				<a rel="bookmark">doc.div() doc.div(index)</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>doc.div()返回doc中所有的div元素组成的集合(elements类型),doc.div(index)表示由doc中第index个div元素(element类型）。此方法对element(document)和elements类型的元素适用.</p>
		<p>还有一些类似的函数，下面API中不详细说明。doc.a(),doc.a(index),doc.ul(),doc.ul(index)......</p>
		<p>由于doc.div()的返回值是element或elements,所以此类函数经常连续着使用,如：doc.div().p().a()</p>
	</div><!-- .entry-summary -->
</article>


<article id="post-16" class="post-16 post type-post status-publish format-standard hentry category-global-ajax-event-handlers category-10">
	<header class="entry-header">
		<div class="entry-meta">
			</div>
					<h1 class="entry-title">
				<a rel="bookmark">doc.size()</a>
			</h1>
			</header>

		<div class="entry-summary">
		<p>返回DOM元素集合doc中元素的数量.此方法只使用于元素集合(elements类型).</p>
	
	</div><!-- .entry-summary -->
</article>
	</div>

	<div id="sidebar" class="widget-area" role="complementary">
	
	<aside id="categories" class="widget">
		<ul>
			<li class="cat-item cat-item-1"><a>相关页面</a>
			<ul class='children'>
                 <li class="cat-item cat-item-2"><a href="https://github.com/CrawlScript/CrawlScript">CrawlScript在github的主页</a></li>
					 <li class="cat-item cat-item-2"><a href="index.html">CrawlScript简介</a></li>
					<li class="cat-item cat-item-2"><a href="tutorial.html">CrawlScript教程</a></li>
                    <li class="cat-item cat-item-2"><a href="api.html">CrawlScript API</a></li>
					<li class="cat-item cat-item-3"><a href="download.html">CrawlScript下载</a></li>
					
			</ul>
			</li>
		</ul>
	</aside>
	
</div>
</div>
	</div>
</div>


<footer class="clearfix simple">
	<div class="constrain">
			<p class="copyright">Copyright 2014 <a href="https://jquery.org/team/">CrawlScript Team</a>.<br></p>
		</div>
</footer>

<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F20c5e11115b815a551500008e6c3b4cc' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>
